<template>
  <section class="view-test-results">
    <h2 class="flex flex--align-center flex--justify-center">
      <span class="text-pink">${testName}</span>&nbsp;
      <span style="font-size: 22px;"> ${testResult.startTime}</span>
    </h2>

    

    <section class="content">
      <section class="flex flex--justify-center" style="margin-bottom: 20px;">
        <section
          class="result-total"
          class.bind="testResult.total > testResult.passed ? 'failed' : 'passed'"
        >
          <section class="label">
            ${testResult.total > testResult.passed ? 'Failed' : 'Passed'}
          </section>
          <section class="value">${testResult.passed}/${testResult.total}</section>
        </section>
        <section class="result-total orange">
          <section class="label">
            Skipped
          </section>
          <section class="value">${testResult.skipped}</section>
        </section>
        <section class="result-total purple">
          <section class="label">
            Duration
          </section>
          <section class="value">${diffTime(testResult.startTime, testResult.endTime)}</section>
        </section>
        <section class="result-total blue">
          <section class="label">
            URL
          </section>
          <section class="value">${testResult.url}</section>
        </section>
        <section class="result-total pink">
          <section class="label">
            Browser
          </section>
          <section class="value">${testResult.userAgents[0]}</section>
        </section>
      </section>
      
      <section
        class="step"
        repeat.for="test of testResult.fixtures[0].tests"
      >
        <section
          class="flex flex--align-center"
          style="width: 40px;align-self: flex-start;"
        >
          ${$index}
        </section>
        <section
          class="flex flex--align-center"
          style="width: 300px;min-width: 300px;align-self: flex-start;"
        >
          ${test.name}
        </section>
        <section
          class="content"
          style="padding: 10px;"
          if.bind="test.errs && test.errs.length > 0"
        >
          <section repeat.for="error of test.errs" class="flex">
            <section>
              <section>${findErrorLine(error)}</section>
              <!-- <section style="font-size: 14px;cursor: pointer;">
                <a click.trigger="showError = true" if.bind="!showError">Show more</a>
                <a click.trigger="showError = false" if.bind="showError">Show less</a>
              </section>
              <pre if.bind="showError">${error}</pre> -->
              <pre>${error}</pre>
            </section>
            
            <section
              style="
                width: 40px;
                align-self: center;
                padding: 5px 20px;
                cursor: pointer;
              "
              click.delegate="showErrorLine(error)"
            >
            </section>
          </section>
        </section>
        <section style="flex: 1;"></section>
      </section>
    </section>
  </section>
</template>
